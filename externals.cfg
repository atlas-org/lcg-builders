### externals ###
[group externals]
packages = AIDA, boost, clhep, gccxml, gdb, libxml2, python, sqlite, tbb, xerces-c, xrootd

# artificially require any environment variables defined by package or
# groups of packages.
environment = group:buildtools, group:toolchaingcc

build_cmd_options = -j{NCPUS}

[package AIDA]
version = {AIDA_version}
features = tarball, prepare, makemake
source_url = http://cern.ch/mana-fwk/downloads/ext/{source_archive_file}
source_archive_checksum = md5:c14498913913d02250f3f31cf36a3762
unpacked_target = README-AIDA
prepare_cmd = cp -ar ../../{source_dir}/{source_unpacked}/* .
prepare_target = README-AIDA
build_cmd = /bin/true
install_cmd = /bin/cp -ar share {install_dir}/.
install_cmd_std_opts =
install_target = share/src/cpp/AIDA/AIDA.h

[package boost]
version = {boost_version}
features = tarball, prepare, makemake
depends = prepare:python_install
source_archive_file = {source_unpacked}.tar.gz
source_url = http://cern.ch/mana-fwk/downloads/ext/{source_archive_file}
source_archive_checksum = md5:47ce53193922bd5579982edf067afd30
unpacked_target = bootstrap.sh
prepare_cmd = cp -a ../../{source_dir}/{source_unpacked}/* .
prepare_target = bootstrap.sh
build_cmd = ./bootstrap.sh
build_cmd_options = --prefix={install_dir} --without-icu --without-libraries=mpi --with-python={python_install_dir}/bin/python --with-python-root={python_install_dir}
build_target = b2
install_cmd = ./b2 
install_cmd_options = install cxxflags="-std=c++11 -Wno-deprecated-declarations -fvisibility-inlines-hidden" variant=release
install_target = include/boost/any.hpp

# install under Boost instead of boost, for compat with LCG layout
install_dir = {INSTALL_AREA}/Boost/{version}_python{python_version2digit}/{HWAF_VARIANT}

[package clhep]
version = {clhep_version}
features = tarball, cmake, makemake
depends = prepare:cmake_install
source_url = http://cern.ch/mana-fwk/downloads/ext/{source_archive_file}
source_archive_checksum = md5:2e38b75c87394c8dde5521a10e0dcd17
prepare_cmd_options = -DCLHEP_BUILD_DOCS=OFF
unpacked_target = README
build_target = CLHEP
install_target = bin/clhep-config

[package gccxml]
version = {gccxml_version}
features = tarball, cmake, makemake
depends = prepare:cmake_install
source_url = http://cern.ch/mana-fwk/downloads/ext/gccxml-{version}.tar.gz
source_archive_checksum = md5:f6221b9ffa6084e47450356f2f2059b0
unpacked_target = CMakeLists.txt
build_target = bin/gccxml
install_target = bin/gccxml

[package gdb]
version = {gdb_version}
source_url = http://ftp.gnu.org/gnu/gdb/{source_archive_file}
source_archive_checksum = md5:d42841167fd061d90fddf9a7212a1f9f
prepare_cmd_options = --prefix={install_dir} --libdir={install_dir}/lib --enable-werror=no --enable-build-warnings=no --enable-ld=yes
build_target = gdb
install_target = bin/gdb

[package libxml2]
depends = prepare:python_install
version = {libxml2_version}
source_url = ftp://xmlsoft.org/{package}/{source_archive_file}
prepare_cmd_options = --prefix={install_dir} --with-threads --with-history --with-python={python_install_dir}/bin/python
build_target = libxml2.la
install_target = lib/libxml2.a

[package python]
depends = prepare:sqlite_install
version = {python_version}
source_unpacked = Python-{version}
source_archive_file = {source_unpacked}.tgz
source_url = http://www.python.org/ftp/{package}/{version}/{source_archive_file}
prepare_cmd_options = --prefix={install_dir} --enable-shared --with-threads --enable-unicode=ucs4
build_target = python
install_target = bin/python
# for compat with LCG layout
install_dir = {INSTALL_AREA}/Python/{version}/{HWAF_VARIANT}

export_PATH = prepend:{install_dir}/bin
export_LD_LIBRARY_PATH = prepend:{install_dir}/lib

[package sqlite]
version = {sqlite_version}
source_url = http://www.sqlite.org/2013/{package}-autoconf-3071700.tar.gz
source_unpacked = {package}-autoconf-3071700
build_target = sqlite3
install_target = bin/sqlite3

export_PATH = prepend:{install_dir}/bin
export_LD_LIBRARY_PATH = prepend:{install_dir}/lib


[package tbb]
features = tarball, patch, prepare, makemake
version = {tbb_version}
source_unpacked = tbb41_20130314oss
source_archive_file = {source_unpacked}_src.tgz
source_url = http://cern.ch/mana-fwk/downloads/ext/{source_archive_file}

patch_url = file://{top}/patchfiles/{package}.patch
patch_cmd_options = -p0

unpacked_target = README
prepare_cmd = cp -ar ../../{source_dir}/{source_unpacked}/* .
prepare_target = Makefile

build_cmd = make tbb tbbmalloc tbbproxy
install_cmd = make install PREFIX={install_dir}

buildenv_cfg = release
buildenv_arch = x86_64

export_LD_LIBRARY_PATH = prepend:{install_dir}/lib

[package xerces-c]
version = {xercesc_version}
source_url = http://apache.osuosl.org/xerces/c/3/sources/{source_archive_file}
source_archive_checksum = md5:6a8ec45d83c8cfb1584c5a5345cb51ae
build_target = src/libxerces-c.la
install_target = lib/libxerces-c.la
# for compat with LCG layout
install_dir = {INSTALL_AREA}/XercesC/{version}/{HWAF_VARIANT}
export_LD_LIBRARY_PATH = prepend:{dest_install_dir}/lib

[package xrootd]
version = {xrootd_version}
features = tarball, cmake, makemake
depends = prepare:cmake_install
source_url = http://xrootd.slac.stanford.edu/download/v{version}/{source_archive_file}
source_url_checksum = md5:8c2a2d66a684a8f4395c02ae249f5706
source_archive_file = {source_unpacked}.tar.gz
unpacked_target = CMakeLists.txt
build_target = src/xrdcp
install_target = bin/xrdcp
export_XRDSYS = {dest_install_dir}


#######

[package geant]
version = 4.9.6.p01

[package cry]
version = 1.7

[package genie]
version = 2.8.0

[package lhapdf]
version = 5.8.8

[package mysql]
version = 5.5.32

[package postgresql]
version = 9.1.5

[package pythia]
version = 6

[package log4cpp]
version = 1.1



## EOF ##
